<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Prompt Suggestions Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        .diff-container {
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            overflow: hidden;
        }
        
        .diff-line {
            padding: 0.25rem 0.5rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            line-height: 1.4;
            border-left: 3px solid transparent;
        }
        
        .diff-line.added {
            background-color: #d1edff;
            border-left-color: #0d6efd;
            color: #0c5460;
        }
        
        .diff-line.removed {
            background-color: #f8d7da;
            border-left-color: #dc3545;
            color: #721c24;
        }
        
        .diff-line.unchanged {
            background-color: #f8f9fa;
            color: #495057;
        }
        
        .diff-line-number {
            display: inline-block;
            width: 3rem;
            text-align: right;
            margin-right: 1rem;
            color: #6c757d;
            font-size: 0.75rem;
        }
        
        .code-container {
            position: relative;
        }
        
        .code-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #dc3545, #0d6efd);
            border-radius: 0.375rem 0.375rem 0 0;
        }
        
        .suggested-code::before {
            background: linear-gradient(90deg, #198754, #0d6efd);
        }
        
        .fix-card {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        
        .fix-card.high-priority {
            border-left-color: #dc3545;
            box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
        }
        
        .fix-card.medium-priority {
            border-left-color: #ffc107;
            box-shadow: 0 0 0 0.2rem rgba(255, 193, 7, 0.25);
        }
        
        .fix-card.low-priority {
            border-left-color: #198754;
            box-shadow: 0 0 0 0.2rem rgba(25, 135, 84, 0.25);
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container-fluid py-4">
        <div class="row">
            <div class="col-12">
                <h1 class="mb-4">
                    <i class="bi bi-lightbulb"></i> Enhanced Prompt Suggestions Demo
                </h1>
                
                <!-- Analysis Overview -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">
                            <i class="bi bi-graph-up"></i> Analysis Overview
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="display-6 text-danger">2</div>
                                    <div class="text-muted">High Priority</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="display-6 text-warning">1</div>
                                    <div class="text-muted">Medium Priority</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="display-6 text-success">0</div>
                                    <div class="text-muted">Low Priority</div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center">
                                    <div class="display-6 text-info">3</div>
                                    <div class="text-muted">Total Fixes</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Specific Fixes -->
                <div class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">
                            <i class="bi bi-tools"></i> Specific Fixes (3)
                        </h5>
                        <div class="btn-group btn-group-sm" role="group">
                            <button type="button" class="btn btn-outline-secondary" onclick="toggleAllDiffs()">
                                <i class="bi bi-arrow-left-right"></i> Toggle All Diffs
                            </button>
                            <button type="button" class="btn btn-outline-info" onclick="exportAll()">
                                <i class="bi bi-download"></i> Export All
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        
                        <!-- Fix 1: High Priority -->
                        <div class="card mb-3 fix-card high-priority">
                            <div class="card-header bg-danger text-white">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="bi bi-exclamation-triangle-fill"></i> empathy_experience (55/100 → 75/100)
                                    </h6>
                                    <div class="d-flex gap-2">
                                        <span class="badge bg-danger">HIGH</span>
                                        <span class="badge bg-info">+20 điểm</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning">
                                    <strong><i class="bi bi-exclamation-triangle"></i> Problem:</strong> 
                                    Điểm empathy_experience thấp cho thấy chatbot chưa thể hiện sự đồng cảm và tạo trải nghiệm tích cực cho người dùng.
                                </div>
                                
                                <!-- Enhanced Code Comparison -->
                                <div class="comparison-grid">
                                    <div class="current-code">
                                        <h6><i class="bi bi-x-circle text-danger"></i> Current Code</h6>
                                        <div class="code-container">
                                            <pre class="bg-danger bg-opacity-10 p-3 rounded"><code>## PHONG CÁCH GIAO TIẾP
- Lịch sự, chuyên nghiệp
- Trả lời ngắn gọn
- Không hỏi thêm</code></pre>
                                        </div>
                                    </div>
                                    <div class="suggested-code">
                                        <h6><i class="bi bi-check-circle text-success"></i> Suggested Code</h6>
                                        <div class="code-container suggested-code">
                                            <pre class="bg-success bg-opacity-10 p-3 rounded"><code>## PHONG CÁCH GIAO TIẾP
- Lịch sự, chuyên nghiệp, thân thiện
- Thể hiện sự đồng cảm với khách hàng
- Sử dụng ngôn ngữ tích cực và hỗ trợ
- Hỏi thêm về nhu cầu và mong muốn của khách
- Đưa ra lời khuyên hữu ích</code></pre>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Inline Diff View -->
                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6><i class="bi bi-arrow-left-right"></i> Diff View</h6>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="toggleDiff(0)">
                                            <i class="bi bi-eye"></i> Toggle Diff
                                        </button>
                                    </div>
                                    <div id="diff-0" class="diff-container" style="display: none;">
                                        <div class="diff-view">
                                            <div class="diff-line removed">
                                                <span class="diff-line-number">-</span>
                                                ## PHONG CÁCH GIAO TIẾP
                                            </div>
                                            <div class="diff-line removed">
                                                <span class="diff-line-number">-</span>
                                                - Lịch sự, chuyên nghiệp
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Lịch sự, chuyên nghiệp, thân thiện
                                            </div>
                                            <div class="diff-line removed">
                                                <span class="diff-line-number">-</span>
                                                - Trả lời ngắn gọn
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Thể hiện sự đồng cảm với khách hàng
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Sử dụng ngôn ngữ tích cực và hỗ trợ
                                            </div>
                                            <div class="diff-line removed">
                                                <span class="diff-line-number">-</span>
                                                - Không hỏi thêm
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Hỏi thêm về nhu cầu và mong muốn của khách
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Đưa ra lời khuyên hữu ích
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <h6><i class="bi bi-lightbulb"></i> Reasoning</h6>
                                    <p class="text-muted bg-light p-3 rounded">
                                        Dựa trên evaluation summary: empathy_experience chỉ đạt 55/100. Cần cải thiện phong cách giao tiếp để tạo trải nghiệm tích cực hơn cho khách hàng.
                                    </p>
                                </div>
                                
                                <div class="mt-3 d-flex gap-2 flex-wrap">
                                    <button class="btn btn-outline-primary btn-sm" onclick="showDiffModal(0)">
                                        <i class="bi bi-arrow-left-right"></i> Full Diff
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="applyFix(0)">
                                        <i class="bi bi-check-circle"></i> Apply Fix
                                    </button>
                                    <button class="btn btn-outline-info btn-sm" onclick="copyToClipboard(0)">
                                        <i class="bi bi-clipboard"></i> Copy
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="exportFix(0)">
                                        <i class="bi bi-download"></i> Export
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Fix 2: High Priority -->
                        <div class="card mb-3 fix-card high-priority">
                            <div class="card-header bg-danger text-white">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="bi bi-exclamation-triangle-fill"></i> slots_completeness (62/100 → 85/100)
                                    </h6>
                                    <div class="d-flex gap-2">
                                        <span class="badge bg-danger">HIGH</span>
                                        <span class="badge bg-info">+23 điểm</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning">
                                    <strong><i class="bi bi-exclamation-triangle"></i> Problem:</strong> 
                                    Slots completeness thấp (62/100) - agent không thu thập đủ thông tin.
                                </div>
                                
                                <!-- Enhanced Code Comparison -->
                                <div class="comparison-grid">
                                    <div class="current-code">
                                        <h6><i class="bi bi-x-circle text-danger"></i> Current Code</h6>
                                        <div class="code-container">
                                            <pre class="bg-danger bg-opacity-10 p-3 rounded"><code>## THU THẬP THÔNG TIN
- Hỏi điểm đi
- Hỏi điểm đến  
- Hỏi ngày đi
- Hỏi số khách</code></pre>
                                        </div>
                                    </div>
                                    <div class="suggested-code">
                                        <h6><i class="bi bi-check-circle text-success"></i> Suggested Code</h6>
                                        <div class="code-container suggested-code">
                                            <pre class="bg-success bg-opacity-10 p-3 rounded"><code>## THU THẬP THÔNG TIN
- Hỏi điểm đi
- Hỏi điểm đến
- Hỏi ngày đi
- Hỏi giờ đi (sáng/chiều/tối)
- Hỏi số khách
- Hỏi loại xe (ghế ngồi/giường nằm)</code></pre>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Inline Diff View -->
                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6><i class="bi bi-arrow-left-right"></i> Diff View</h6>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="toggleDiff(1)">
                                            <i class="bi bi-eye"></i> Toggle Diff
                                        </button>
                                    </div>
                                    <div id="diff-1" class="diff-container" style="display: none;">
                                        <div class="diff-view">
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">1</span>
                                                ## THU THẬP THÔNG TIN
                                            </div>
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">2</span>
                                                - Hỏi điểm đi
                                            </div>
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">3</span>
                                                - Hỏi điểm đến
                                            </div>
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">4</span>
                                                - Hỏi ngày đi
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Hỏi giờ đi (sáng/chiều/tối)
                                            </div>
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">5</span>
                                                - Hỏi số khách
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Hỏi loại xe (ghế ngồi/giường nằm)
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <h6><i class="bi bi-lightbulb"></i> Reasoning</h6>
                                    <p class="text-muted bg-light p-3 rounded">
                                        Dựa trên evaluation summary: slots_completeness chỉ đạt 62/100. Cần bổ sung thêm giờ đi và loại xe để thu thập đầy đủ thông tin.
                                    </p>
                                </div>
                                
                                <div class="mt-3 d-flex gap-2 flex-wrap">
                                    <button class="btn btn-outline-primary btn-sm" onclick="showDiffModal(1)">
                                        <i class="bi bi-arrow-left-right"></i> Full Diff
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="applyFix(1)">
                                        <i class="bi bi-check-circle"></i> Apply Fix
                                    </button>
                                    <button class="btn btn-outline-info btn-sm" onclick="copyToClipboard(1)">
                                        <i class="bi bi-clipboard"></i> Copy
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="exportFix(1)">
                                        <i class="bi bi-download"></i> Export
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Fix 3: Medium Priority -->
                        <div class="card mb-3 fix-card medium-priority">
                            <div class="card-header bg-warning text-dark">
                                <div class="d-flex justify-content-between align-items-center">
                                    <h6 class="mb-0">
                                        <i class="bi bi-exclamation-circle-fill"></i> style_tts (60/100 → 80/100)
                                    </h6>
                                    <div class="d-flex gap-2">
                                        <span class="badge bg-warning text-dark">MEDIUM</span>
                                        <span class="badge bg-info">+20 điểm</span>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-warning">
                                    <strong><i class="bi bi-exclamation-triangle"></i> Problem:</strong> 
                                    Style TTS thấp (60/100) - phong cách giao tiếp và đọc số liệu chưa phù hợp.
                                </div>
                                
                                <!-- Enhanced Code Comparison -->
                                <div class="comparison-grid">
                                    <div class="current-code">
                                        <h6><i class="bi bi-x-circle text-danger"></i> Current Code</h6>
                                        <div class="code-container">
                                            <pre class="bg-danger bg-opacity-10 p-3 rounded"><code>## HƯỚNG DẪN TTS
- Đọc số rõ ràng</code></pre>
                                        </div>
                                    </div>
                                    <div class="suggested-code">
                                        <h6><i class="bi bi-check-circle text-success"></i> Suggested Code</h6>
                                        <div class="code-container suggested-code">
                                            <pre class="bg-success bg-opacity-10 p-3 rounded"><code>## HƯỚNG DẪN TTS
- Đọc số rõ ràng, chậm rãi
- Sử dụng ngữ điệu thân thiện
- Nhấn mạnh thông tin quan trọng
- Tạm dừng sau mỗi thông tin chính</code></pre>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Inline Diff View -->
                                <div class="mt-3">
                                    <div class="d-flex justify-content-between align-items-center mb-2">
                                        <h6><i class="bi bi-arrow-left-right"></i> Diff View</h6>
                                        <button class="btn btn-outline-secondary btn-sm" onclick="toggleDiff(2)">
                                            <i class="bi bi-eye"></i> Toggle Diff
                                        </button>
                                    </div>
                                    <div id="diff-2" class="diff-container" style="display: none;">
                                        <div class="diff-view">
                                            <div class="diff-line unchanged">
                                                <span class="diff-line-number">1</span>
                                                ## HƯỚNG DẪN TTS
                                            </div>
                                            <div class="diff-line removed">
                                                <span class="diff-line-number">-</span>
                                                - Đọc số rõ ràng
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Đọc số rõ ràng, chậm rãi
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Sử dụng ngữ điệu thân thiện
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Nhấn mạnh thông tin quan trọng
                                            </div>
                                            <div class="diff-line added">
                                                <span class="diff-line-number">+</span>
                                                - Tạm dừng sau mỗi thông tin chính
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-3">
                                    <h6><i class="bi bi-lightbulb"></i> Reasoning</h6>
                                    <p class="text-muted bg-light p-3 rounded">
                                        Dựa trên evaluation summary: style_tts chỉ đạt 60/100. Cần cải thiện hướng dẫn TTS để giao tiếp tự nhiên hơn.
                                    </p>
                                </div>
                                
                                <div class="mt-3 d-flex gap-2 flex-wrap">
                                    <button class="btn btn-outline-primary btn-sm" onclick="showDiffModal(2)">
                                        <i class="bi bi-arrow-left-right"></i> Full Diff
                                    </button>
                                    <button class="btn btn-outline-success btn-sm" onclick="applyFix(2)">
                                        <i class="bi bi-check-circle"></i> Apply Fix
                                    </button>
                                    <button class="btn btn-outline-info btn-sm" onclick="copyToClipboard(2)">
                                        <i class="bi bi-clipboard"></i> Copy
                                    </button>
                                    <button class="btn btn-outline-warning btn-sm" onclick="exportFix(2)">
                                        <i class="bi bi-download"></i> Export
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary -->
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0">
                            <i class="bi bi-file-text"></i> Summary
                        </h6>
                    </div>
                    <div class="card-body">
                        <p class="mb-0">
                            Prompt cần được cải thiện đáng kể về sự đồng cảm và độ đầy đủ thông tin. Cần bổ sung các ví dụ cụ thể về cách thể hiện sự đồng cảm, cũng như các câu hỏi gợi ý để đảm bảo chatbot thu thập đủ thông tin cần thiết. Việc này sẽ giúp cải thiện đáng kể điểm số tổng thể và trải nghiệm người dùng.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function toggleDiff(index) {
            const diffElement = document.getElementById(`diff-${index}`);
            if (diffElement) {
                const isVisible = diffElement.style.display !== 'none';
                diffElement.style.display = isVisible ? 'none' : 'block';
            }
        }

        function toggleAllDiffs() {
            const diffs = document.querySelectorAll('[id^="diff-"]');
            const allVisible = Array.from(diffs).every(diff => diff.style.display !== 'none');
            
            diffs.forEach(diff => {
                diff.style.display = allVisible ? 'none' : 'block';
            });
        }

        function showDiffModal(index) {
            alert(`Show full diff modal for fix ${index}`);
        }

        function applyFix(index) {
            alert(`Apply fix ${index}`);
        }

        function copyToClipboard(index) {
            alert(`Copy suggested code for fix ${index}`);
        }

        function exportFix(index) {
            alert(`Export fix ${index}`);
        }

        function exportAll() {
            alert('Export all suggestions');
        }
    </script>
</body>
</html>

